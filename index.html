<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Silver Connect - EPICS Demo 4.0</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Inter:wght@400;500;600&family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    
    <style>
        /* =========================================
           CORE STYLES & VARIABLES - UPDATED
           ========================================= */
        :root {
            /* Elder Theme */
            --elder-bg: #FFFBF0;
            --elder-primary: #D35400;
            --elder-secondary: #E67E22;
            --elder-card: #FFF3E0;
            --elder-text: #5D4037;
            
            /* Gen Z Theme - Enhanced */
            --genz-bg: #0A0A0F;
            --genz-surface: #151522;
            --genz-surface-light: #1E1E2E;
            --genz-primary: #7B68EE;
            --genz-primary-dark: #5D4FDB;
            --genz-accent: #FF6B8B;
            --genz-success: #2ECC71;
            --genz-warning: #F1C40F;
            --genz-danger: #E74C3C;
            --genz-text: #FFFFFF;
            --genz-text-secondary: #B0B0C8;
            
            /* UI Variables */
            --glass-bg: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.15);
            
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.2);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.4);
            --shadow-glow: 0 0 20px rgba(123, 104, 238, 0.4);
            
            --border-radius-sm: 10px;
            --border-radius-md: 18px;
            --border-radius-lg: 24px;
            --border-radius-xl: 32px;
            
            --transition-fast: 0.2s ease;
            --transition-normal: 0.3s ease;
            --transition-slow: 0.5s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
        }

        #app-frame {
            width: 100%;
            max-width: 430px;
            height: 100%;
            max-height: 900px;
            background: white;
            position: relative;
            box-shadow: var(--shadow-lg);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            border-radius: 12px;
        }

        .hidden {
            display: none !important;
        }

        /* =========================================
           LANDING SCREEN - KEEP AS IS
           ========================================= */
        #screen-landing {
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            background: linear-gradient(135deg, #FF9A3C 0%, #FF6B6B 100%);
            padding: 40px 20px;
            position: relative;
            overflow: hidden;
        }

        .landing-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
            z-index: 0;
        }

        .landing-content {
            position: relative;
            z-index: 1;
            text-align: center;
        }

        .app-logo {
            font-family: 'Outfit', sans-serif;
            font-size: 42px;
            font-weight: 800;
            color: white;
            margin-bottom: 10px;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            letter-spacing: -0.5px;
        }

        .app-tagline {
            font-family: 'Lora', serif;
            font-size: 16px;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 50px;
            font-style: italic;
        }

        .version-badge {
            display: inline-block;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 40px;
            backdrop-filter: blur(10px);
        }

        .role-selection {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 20px;
        }

        .role-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--border-radius-lg);
            padding: 25px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            cursor: pointer;
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
        }

        .role-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0));
            z-index: 0;
        }

        .role-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.25);
            box-shadow: var(--shadow-lg);
        }

        .role-card:active {
            transform: translateY(-2px);
        }

        .role-icon {
            font-size: 48px;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }

        .role-title {
            font-family: 'Outfit', sans-serif;
            font-size: 20px;
            font-weight: 700;
            color: white;
            margin-bottom: 5px;
            position: relative;
            z-index: 1;
        }

        .role-desc {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
            position: relative;
            z-index: 1;
        }

        .landing-footer {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.6);
            text-align: center;
            padding-top: 20px;
            position: relative;
            z-index: 1;
        }

        /* =========================================
           ELDER FLOW STYLES - KEEP AS IS
           ========================================= */
        .theme-elder {
            background-color: var(--elder-bg);
            background-image: url('https://www.transparenttextures.com/patterns/cream-paper.png');
            color: var(--elder-text);
            height: 100%;
            font-family: 'Lora', serif;
            position: relative;
            overflow: hidden;
        }

        /* Voice Feedback */
        .voice-feedback {
            position: absolute;
            top: 30px;
            left: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: var(--border-radius-md);
            padding: 15px;
            box-shadow: var(--shadow-md);
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideDown 0.5s ease;
        }

        .voice-icon {
            width: 40px;
            height: 40px;
            background: var(--elder-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            animation: pulse 2s infinite;
        }

        .voice-text {
            flex: 1;
            font-size: 15px;
            line-height: 1.4;
        }

        /* Elder Welcome Screen */
        .elder-welcome {
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px 30px;
            text-align: center;
            background: linear-gradient(180deg, var(--elder-bg) 0%, #FFEBCD 100%);
        }

        .elder-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 4px solid var(--elder-secondary);
            margin-bottom: 25px;
            box-shadow: var(--shadow-md);
        }

        .elder-greeting {
            font-size: 28px;
            font-weight: 700;
            color: var(--elder-primary);
            margin-bottom: 10px;
        }

        .elder-subtitle {
            font-size: 16px;
            color: var(--elder-text);
            margin-bottom: 30px;
            max-width: 300px;
            line-height: 1.5;
        }

        .time-indicator {
            background: rgba(255, 107, 107, 0.1);
            border-radius: 20px;
            padding: 12px 25px;
            margin-bottom: 40px;
            display: flex;
            align-items: center;
            gap: 10px;
            border: 1px solid rgba(255, 107, 107, 0.3);
        }

        .btn-elder-primary {
            width: 85%;
            padding: 22px;
            font-family: 'Outfit', sans-serif;
            font-size: 24px;
            font-weight: 700;
            text-transform: uppercase;
            border: none;
            border-radius: var(--border-radius-xl);
            background: linear-gradient(135deg, var(--elder-primary) 0%, var(--elder-secondary) 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(211, 84, 0, 0.3);
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
        }

        .btn-elder-primary::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.7s ease;
        }

        .btn-elder-primary:hover::after {
            left: 100%;
        }

        .btn-elder-primary:active {
            transform: translateY(4px);
            box-shadow: 0 4px 10px rgba(211, 84, 0, 0.3);
        }

        /* Mirror Screen */
        .mirror-screen {
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 30px 20px;
            background: linear-gradient(180deg, #000 0%, #222 100%);
            position: relative;
        }

        .mirror-title {
            color: white;
            font-size: 26px;
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
            font-family: 'Outfit', sans-serif;
        }

        .mirror-subtitle {
            color: rgba(255, 255, 255, 0.7);
            font-size: 16px;
            margin-bottom: 30px;
            text-align: center;
            max-width: 300px;
        }

        #elder-cam-container {
            width: 90%;
            height: 50vh;
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            margin-bottom: 30px;
            position: relative;
            box-shadow: 0 0 40px rgba(255, 255, 255, 0.1);
        }

        #elder-cam {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(1.1) contrast(1.1) saturate(1.1) blur(1px);
            transform: scaleX(-1);
        }

        .beauty-filter {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
            backdrop-filter: blur(10px);
            z-index: 10;
        }

        .mirror-controls {
            width: 90%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .mirror-feedback {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius-md);
            padding: 15px;
            color: white;
            text-align: center;
            font-size: 14px;
            width: 100%;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .mirror-feedback.good {
            background: rgba(46, 204, 113, 0.2);
            border-color: rgba(46, 204, 113, 0.4);
        }

        .mirror-feedback.warning {
            background: rgba(241, 196, 15, 0.2);
            border-color: rgba(241, 196, 15, 0.4);
        }

        /* Live Screen for Elder */
        .elder-live-screen {
            height: 100%;
            position: relative;
            background: #000;
        }

        .elder-live-header {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 20;
            background: linear-gradient(180deg, rgba(0,0,0,0.8) 0%, transparent 100%);
        }

        .live-badge {
            background: #E74C3C;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 700;
            color: white;
            display: flex;
            align-items: center;
            gap: 8px;
            animation: pulse 2s infinite;
        }

        .viewer-count {
            background: rgba(0, 0, 0, 0.6);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 18px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(10px);
        }

        .elder-live-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transform: scaleX(-1);
        }

        .elder-live-controls {
            position: absolute;
            bottom: 30px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            z-index: 20;
        }

        .btn-elder-end {
            width: 70%;
            padding: 20px;
            font-family: 'Outfit', sans-serif;
            font-size: 20px;
            font-weight: 700;
            border: none;
            border-radius: var(--border-radius-xl);
            background: linear-gradient(135deg, #E74C3C 0%, #C0392B 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(231, 76, 60, 0.3);
            transition: all var(--transition-normal);
        }

        .btn-elder-end:active {
            transform: translateY(4px);
            box-shadow: 0 4px 10px rgba(231, 76, 60, 0.3);
        }

        /* Elder Session End Overlay */
        .session-end-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            padding: 30px;
            text-align: center;
        }

        .end-title {
            font-size: 32px;
            color: white;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .end-stats {
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius-lg);
            padding: 25px;
            margin-bottom: 40px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 300px;
        }

        .end-stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .end-stat-item:last-child {
            border-bottom: none;
        }

        .stat-label {
            color: rgba(255, 255, 255, 0.7);
            font-size: 16px;
        }

        .stat-value {
            color: white;
            font-size: 24px;
            font-weight: 700;
        }

        .end-message {
            color: rgba(255, 255, 255, 0.8);
            font-size: 16px;
            margin-bottom: 40px;
            max-width: 300px;
            line-height: 1.6;
        }

        .auto-close-timer {
            color: rgba(255, 255, 255, 0.5);
            font-size: 14px;
            margin-top: 20px;
        }

        /* =========================================
           GEN Z FLOW STYLES - ENHANCED
           ========================================= */
        .theme-genz {
            background-color: var(--genz-bg);
            color: var(--genz-text);
            height: 100%;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        /* Gen Z Header */
        .genz-header {
            height: 70px;
            padding: 0 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(10, 10, 15, 0.98);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(123, 104, 238, 0.2);
            z-index: 100;
            position: sticky;
            top: 0;
        }

        .logo-genz {
            font-family: 'Outfit', sans-serif;
            font-weight: 800;
            font-size: 20px;
            background: linear-gradient(135deg, var(--genz-primary) 0%, #9D8AFF 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.5px;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .notification-badge {
            position: relative;
            width: 36px;
            height: 36px;
            background: var(--genz-surface);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--genz-text-secondary);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .notification-badge:hover {
            background: var(--genz-surface-light);
            color: var(--genz-text);
        }

        .notification-badge.active::after {
            content: '';
            position: absolute;
            top: 5px;
            right: 5px;
            width: 8px;
            height: 8px;
            background: var(--genz-accent);
            border-radius: 50%;
            border: 2px solid var(--genz-surface);
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--genz-primary) 0%, #9D8AFF 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            cursor: pointer;
        }

        /* Gen Z Content Area */
        .genz-content {
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        /* View 1: Discovery Feed - FIXED IMAGES */
        .discovery-view {
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .discovery-header {
            padding: 20px 20px 10px;
            position: sticky;
            top: 0;
            background: var(--genz-bg);
            z-index: 10;
        }

        .discovery-title {
            font-family: 'Outfit', sans-serif;
            font-size: 26px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .discovery-subtitle {
            color: var(--genz-text-secondary);
            font-size: 14px;
        }

        .feed-scroll {
            flex: 1;
            overflow-y: auto;
            padding: 10px 20px 20px;
        }

        .event-card {
            background: var(--genz-surface);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            margin-bottom: 20px;
            border: 1px solid var(--glass-border);
            transition: all var(--transition-normal);
            position: relative;
        }

        .event-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-glow);
            border-color: rgba(123, 104, 238, 0.4);
        }

        .event-card.featured::before {
            content: 'Ná»”I Báº¬T';
            position: absolute;
            top: 15px;
            left: 15px;
            background: linear-gradient(135deg, var(--genz-accent) 0%, #FF9A3C 100%);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 10px;
            font-weight: 700;
            z-index: 5;
            letter-spacing: 0.5px;
        }

        .event-img-container {
            position: relative;
            height: 180px;
            overflow: hidden;
        }

        .event-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .event-card:hover .event-img {
            transform: scale(1.05);
        }

        .event-badge {
            position: absolute;
            bottom: 15px;
            left: 15px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 11px;
            display: flex;
            align-items: center;
            gap: 5px;
            backdrop-filter: blur(5px);
        }

        .event-info {
            padding: 20px;
        }

        .event-title {
            font-family: 'Outfit', sans-serif;
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 8px;
            line-height: 1.3;
        }

        .event-description {
            color: var(--genz-text-secondary);
            font-size: 13px;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .event-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .event-host {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .host-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #FF9A3C 0%, #FF6B6B 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
        }

        .host-info {
            display: flex;
            flex-direction: column;
        }

        .host-name {
            font-weight: 600;
            font-size: 14px;
        }

        .host-age {
            font-size: 11px;
            color: var(--genz-text-secondary);
        }

        .event-time {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .time-label {
            font-size: 11px;
            color: var(--genz-text-secondary);
            margin-bottom: 3px;
        }

        .time-value {
            font-weight: 700;
            font-size: 14px;
            color: var(--genz-primary);
        }

        .btn-book {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, var(--genz-primary) 0%, var(--genz-primary-dark) 100%);
            border: none;
            border-radius: var(--border-radius-md);
            color: white;
            font-family: 'Outfit', sans-serif;
            font-weight: 700;
            font-size: 15px;
            cursor: pointer;
            transition: all var(--transition-normal);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-book:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-glow);
        }

        .btn-book:active {
            transform: translateY(0);
        }

        .btn-book.booked {
            background: linear-gradient(135deg, var(--genz-success) 0%, #27AE60 100%);
            cursor: default;
        }

        .btn-book.booked:hover {
            transform: none;
            box-shadow: none;
        }

        /* =========================================
           LIVE SESSION - COMPLETELY REDESIGNED WITH COLLAPSIBLE PANELS
           ========================================= */
        .live-session-view {
            height: 100%;
            display: flex;
            flex-direction: column;
            background: var(--genz-bg);
        }

        /* Live Header - Improved */
        .live-header {
            padding: 15px 20px;
            background: rgba(15, 15, 22, 0.98);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(123, 104, 238, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
        }

        .live-title {
            display: flex;
            flex-direction: column;
            flex: 1;
        }

        .live-topic {
            font-family: 'Outfit', sans-serif;
            font-weight: 700;
            font-size: 16px;
            margin-bottom: 3px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .live-host {
            font-size: 12px;
            color: var(--genz-text-secondary);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .live-stats {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .live-viewers {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 14px;
            color: var(--genz-text);
            background: rgba(255, 255, 255, 0.1);
            padding: 6px 12px;
            border-radius: 20px;
        }

        .live-duration {
            background: rgba(123, 104, 238, 0.2);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            color: var(--genz-primary);
        }

        /* Main Live Container - NEW LAYOUT */
        .live-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* Video Section - Larger */
        .live-video-container {
            position: relative;
            height: 50%;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .live-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            font-family: 'Outfit', sans-serif;
        }

        .placeholder-icon {
            font-size: 60px;
            margin-bottom: 20px;
            color: var(--genz-primary);
        }

        .placeholder-text {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .placeholder-subtext {
            font-size: 14px;
            color: var(--genz-text-secondary);
            max-width: 80%;
            text-align: center;
        }

        /* Video Controls - Improved */
        .video-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 15px 20px;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Reactions Bar - Improved */
        .reactions-bar {
            display: flex;
            gap: 10px;
        }

        .reaction-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: none;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            color: white;
            font-size: 18px;
            cursor: pointer;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .reaction-btn:hover {
            transform: scale(1.15);
            background: rgba(255, 255, 255, 0.25);
        }

        .reaction-btn.heart {
            color: #FF6B8B;
        }

        .reaction-btn.flower {
            color: #FFD700;
        }

        .reaction-btn.clap {
            color: #7B68EE;
        }

        .reaction-count {
            position: absolute;
            bottom: 50px;
            left: 0;
            right: 0;
            font-size: 12px;
            color: white;
            text-align: center;
            background: rgba(0, 0, 0, 0.5);
            padding: 5px;
            backdrop-filter: blur(5px);
            border-radius: 10px;
            margin: 0 20px;
        }

        .smart-note-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #000;
            font-size: 18px;
            cursor: pointer;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);
        }

        .smart-note-btn:hover {
            transform: scale(1.15);
            box-shadow: 0 6px 16px rgba(255, 215, 0, 0.4);
        }

        /* NEW: LIVE CONTROL PANEL - COLLAPSIBLE */
        .live-control-panel {
            position: absolute;
            bottom: 80px;
            right: 20px;
            z-index: 50;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .control-btn {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: rgba(123, 104, 238, 0.8);
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            transform: scale(1.1);
            background: rgba(123, 104, 238, 1);
        }

        .control-btn.active {
            background: var(--genz-accent);
            transform: rotate(45deg);
        }

        /* LIVE PANELS - COLLAPSIBLE */
        .live-panels-container {
            position: absolute;
            bottom: 140px;
            right: 20px;
            z-index: 40;
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 300px;
            max-width: 90%;
        }

        .live-panel {
            background: rgba(15, 15, 22, 0.95);
            backdrop-filter: blur(20px);
            border-radius: var(--border-radius-lg);
            border: 1px solid rgba(123, 104, 238, 0.3);
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
            max-height: 0;
            opacity: 0;
            transform: translateY(20px);
        }

        .live-panel.active {
            max-height: 400px;
            opacity: 1;
            transform: translateY(0);
        }

        .live-panel.collapsed {
            max-height: 50px;
        }

        .panel-header {
            padding: 15px 20px;
            background: rgba(123, 104, 238, 0.2);
            border-bottom: 1px solid rgba(123, 104, 238, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .panel-title {
            font-family: 'Outfit', sans-serif;
            font-weight: 700;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .panel-badge {
            background: var(--genz-primary);
            color: white;
            min-width: 20px;
            height: 20px;
            border-radius: 50%;
            font-size: 11px;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 5px;
        }

        .panel-toggle {
            background: transparent;
            border: none;
            color: var(--genz-text-secondary);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .panel-toggle:hover {
            color: var(--genz-text);
        }

        .panel-content {
            max-height: 350px;
            overflow-y: auto;
            transition: max-height 0.3s ease;
        }

        .panel-content.collapsed {
            max-height: 0;
            overflow: hidden;
        }

        /* Smart Notes Panel */
        .notes-panel {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .notes-container {
            padding: 15px;
            flex: 1;
            overflow-y: auto;
        }

        .notes-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .note-card {
            background: rgba(123, 104, 238, 0.1);
            border: 1px solid rgba(123, 104, 238, 0.2);
            border-radius: var(--border-radius-md);
            padding: 15px;
            position: relative;
            animation: slideInLeft 0.3s ease;
        }

        .note-card.pinned {
            background: rgba(255, 215, 0, 0.1);
            border-color: rgba(255, 215, 0, 0.3);
        }

        .note-card.pinned::before {
            content: 'ðŸ“Œ';
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 14px;
        }

        .note-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .note-time {
            font-size: 11px;
            font-weight: 700;
            color: var(--genz-primary);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .note-content {
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 10px;
            color: var(--genz-text);
            font-style: italic;
            padding-left: 8px;
            border-left: 3px solid var(--genz-primary);
        }

        .note-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .note-tag {
            background: rgba(123, 104, 238, 0.15);
            color: var(--genz-primary);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
        }

        /* Chat Panel */
        .chat-panel {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .chat-container {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }

        .chat-messages {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .chat-message {
            animation: fadeIn 0.3s ease;
        }

        .message-system {
            text-align: center;
            margin-bottom: 15px;
        }

        .system-bubble {
            display: inline-block;
            background: rgba(123, 104, 238, 0.15);
            border: 1px solid rgba(123, 104, 238, 0.3);
            color: var(--genz-text);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 13px;
            max-width: 90%;
        }

        .message-user {
            display: flex;
            flex-direction: column;
        }

        .message-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 5px;
        }

        .user-avatar-small {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--genz-accent) 0%, #FF9A3C 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
            color: white;
        }

        .user-name {
            font-weight: 700;
            font-size: 13px;
        }

        .message-time {
            font-size: 11px;
            color: var(--genz-text-secondary);
            margin-left: auto;
        }

        .message-bubble {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius-md);
            padding: 12px 15px;
            max-width: 90%;
            word-wrap: break-word;
            font-size: 13px;
            line-height: 1.4;
        }

        .message-bubble.own {
            background: rgba(123, 104, 238, 0.2);
            border-color: rgba(123, 104, 238, 0.4);
            margin-left: auto;
        }

        .chat-input-area {
            padding: 12px 15px;
            border-top: 1px solid rgba(123, 104, 238, 0.2);
            display: flex;
            gap: 10px;
            align-items: center;
            background: rgba(15, 15, 22, 0.9);
        }

        .chat-input {
            flex: 1;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius-md);
            padding: 12px 15px;
            color: var(--genz-text);
            font-size: 13px;
            outline: none;
            transition: all 0.2s ease;
        }

        .chat-input:focus {
            border-color: var(--genz-primary);
            box-shadow: 0 0 0 2px rgba(123, 104, 238, 0.2);
        }

        .chat-input::placeholder {
            color: var(--genz-text-secondary);
        }

        .send-btn {
            width: 40px;
            height: 40px;
            background: var(--genz-primary);
            border: none;
            border-radius: var(--border-radius-md);
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .send-btn:hover {
            background: var(--genz-primary-dark);
            transform: translateY(-2px);
        }

        /* Empty States */
        .empty-state {
            padding: 30px 20px;
            text-align: center;
            color: var(--genz-text-secondary);
        }

        .empty-icon {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        .empty-text {
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 15px;
        }

        /* View 3: Profile & Notebook */
        .profile-view {
            height: 100%;
            overflow-y: auto;
            padding: 0 0 80px;
        }

        .profile-header {
            padding: 40px 20px 30px;
            text-align: center;
            background: linear-gradient(135deg, var(--genz-surface) 0%, #15152A 100%);
            border-bottom: 1px solid rgba(123, 104, 238, 0.2);
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin: 0 auto 20px;
            background: linear-gradient(135deg, var(--genz-primary) 0%, #9D8AFF 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 36px;
            font-weight: 700;
            border: 4px solid var(--genz-bg);
            box-shadow: var(--shadow-md);
        }

        .profile-name {
            font-family: 'Outfit', sans-serif;
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .profile-rank {
            display: inline-block;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #000;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            padding: 0 20px;
            margin-top: 30px;
        }

        .stat-box {
            background: var(--genz-surface);
            border-radius: var(--border-radius-md);
            padding: 20px;
            text-align: center;
            border: 1px solid var(--glass-border);
            transition: all var(--transition-fast);
        }

        .stat-box:hover {
            transform: translateY(-3px);
            border-color: rgba(123, 104, 238, 0.4);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .stat-number {
            font-family: 'Outfit', sans-serif;
            font-size: 28px;
            font-weight: 800;
            color: var(--genz-primary);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 12px;
            color: var(--genz-text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .profile-section {
            padding: 25px 20px 15px;
        }

        .section-title {
            font-family: 'Outfit', sans-serif;
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            color: var(--genz-primary);
        }

        .notebook-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .notebook-card {
            background: var(--genz-surface);
            border-radius: var(--border-radius-md);
            padding: 20px;
            border: 1px solid var(--glass-border);
            transition: all var(--transition-fast);
        }

        .notebook-card:hover {
            transform: translateY(-3px);
            border-color: rgba(123, 104, 238, 0.4);
            box-shadow: var(--shadow-sm);
        }

        .notebook-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .notebook-title {
            font-weight: 700;
            font-size: 15px;
        }

        .notebook-date {
            font-size: 12px;
            color: var(--genz-text-secondary);
        }

        .notebook-preview {
            font-size: 13px;
            color: var(--genz-text-secondary);
            margin-bottom: 10px;
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .notebook-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .notebook-tag {
            background: rgba(123, 104, 238, 0.15);
            color: var(--genz-primary);
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        .logout-btn {
            width: calc(100% - 40px);
            margin: 30px 20px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius-md);
            color: var(--genz-text);
            font-family: 'Outfit', sans-serif;
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
            transition: all var(--transition-normal);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .logout-btn:hover {
            background: rgba(255, 117, 76, 0.1);
            border-color: rgba(255, 117, 76, 0.3);
            color: var(--genz-accent);
        }

        /* Gen Z Footer Navigation */
        .genz-footer {
            height: 80px;
            background: var(--genz-surface);
            border-top: 1px solid rgba(123, 104, 238, 0.2);
            display: flex;
            align-items: center;
            justify-content: space-around;
            padding: 0 10px;
            position: sticky;
            bottom: 0;
            z-index: 100;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            color: var(--genz-text-secondary);
            font-size: 11px;
            cursor: pointer;
            width: 70px;
            padding: 12px 0;
            border-radius: var(--border-radius-md);
            transition: all var(--transition-fast);
        }

        .nav-item i {
            font-size: 22px;
            transition: all var(--transition-fast);
        }

        .nav-item:hover {
            color: var(--genz-text);
            background: rgba(255, 255, 255, 0.05);
        }

        .nav-item.active {
            color: var(--genz-primary);
            background: rgba(123, 104, 238, 0.15);
        }

        .nav-item.active i {
            transform: translateY(-3px);
        }

        .nav-live {
            position: relative;
        }

        .nav-live-badge {
            position: absolute;
            top: 0;
            right: 5px;
            width: 8px;
            height: 8px;
            background: var(--genz-danger);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        /* Toast Notifications */
        .toast {
            position: fixed;
            top: 20%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(15, 15, 22, 0.95);
            backdrop-filter: blur(20px);
            color: white;
            padding: 15px 25px;
            border-radius: var(--border-radius-lg);
            font-size: 14px;
            font-weight: 600;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 12px;
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow-lg);
            animation: slideDown 0.4s ease, fadeOut 0.4s ease 2.1s forwards;
            max-width: 300px;
            text-align: center;
        }

        .toast.success {
            border-left: 4px solid var(--genz-success);
        }

        .toast.info {
            border-left: 4px solid var(--genz-primary);
        }

        .toast.warning {
            border-left: 4px solid var(--genz-accent);
        }

        .toast-icon {
            font-size: 18px;
        }

        /* =========================================
           ANIMATIONS - ENHANCED
           ========================================= */
        @keyframes pulse {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.05); }
            100% { opacity: 1; transform: scale(1); }
        }

        @keyframes slideDown {
            from { transform: translate(-50%, -100%); opacity: 0; }
            to { transform: translate(-50%, 0); opacity: 1; }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; visibility: hidden; }
        }

        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 10px rgba(123, 104, 238, 0.5); }
            50% { box-shadow: 0 0 20px rgba(123, 104, 238, 0.8); }
        }

        /* Loading Spinner */
        .loading-spinner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(123, 104, 238, 0.2);
            border-top-color: var(--genz-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        /* Responsive adjustments */
        @media (max-width: 400px) {
            .app-logo { font-size: 36px; }
            .elder-greeting { font-size: 24px; }
            .btn-elder-primary { font-size: 20px; padding: 20px; }
            .profile-stats { grid-template-columns: 1fr; }
            .live-panels-container { width: 280px; }
            .live-video-container { height: 45%; }
        }
    </style>
</head>
<body>

    <div id="app-frame">
        <!-- Landing Screen -->
        <div id="screen-landing">
            <div class="landing-background"></div>
            <div class="landing-content">
                <div class="app-logo">Silver Connect</div>
                <div class="app-tagline">Káº¿t ná»‘i tháº¿ há»‡ - Chia sáº» tri thá»©c</div>
                <div class="version-badge">EPICS DEMO 4.0</div>
                
                <div class="role-selection">
                    <div class="role-card" onclick="startElderFlow()">
                        <div class="role-icon" style="color: #FF9A3C;">
                            <i class="fas fa-user-clock"></i>
                        </div>
                        <div class="role-title">NgÆ°á»i cao tuá»•i</div>
                        <div class="role-desc">Ká»ƒ chuyá»‡n, truyá»n cáº£m há»©ng</div>
                    </div>
                    
                    <div class="role-card" onclick="startStudentFlow()">
                        <div class="role-icon" style="color: #7B68EE;">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="role-title">Sinh viÃªn (Gen Z)</div>
                        <div class="role-desc">Láº¯ng nghe, há»c há»i, káº¿t ná»‘i</div>
                    </div>
                </div>
            </div>
            
            <div class="landing-footer">
                EPICS Project - Äáº¡i há»c BÃ¡ch Khoa HÃ  Ná»™i
            </div>
        </div>

        <!-- Elder Flow Screens -->
        <div id="screen-elder" class="hidden theme-elder">
            <!-- Screen will be dynamically rendered here -->
        </div>

        <!-- Student (Gen Z) Flow -->
        <div id="screen-student" class="hidden theme-genz">
            <!-- Header -->
            <div class="genz-header">
                <div class="logo-genz">Silver Connect</div>
                <div class="header-actions">
                    <div class="notification-badge" id="notification-badge">
                        <i class="fas fa-bell"></i>
                    </div>
                    <div class="user-avatar" onclick="switchTab('profile')">
                        <span>S</span>
                    </div>
                </div>
            </div>

            <!-- Content Area -->
            <div class="genz-content">
                <!-- View 1: Discovery -->
                <div id="view-home" class="discovery-view">
                    <div class="discovery-header">
                        <div class="discovery-title">DÃ nh cho báº¡n</div>
                        <div class="discovery-subtitle">KhÃ¡m phÃ¡ cÃ¡c buá»•i chia sáº» thÃº vá»‹</div>
                    </div>
                    
                    <div class="feed-scroll">
                        <div class="event-card featured">
                            <div class="event-img-container">
                                <img src="https://images.unsplash.com/photo-1579532537598-459ecdaf39cc?q=80&w=600&auto=format&fit=crop" class="event-img">
                                <div class="event-badge">
                                    <i class="fas fa-users"></i> 50+ Ä‘Ã£ Ä‘Äƒng kÃ½
                                </div>
                            </div>
                            <div class="event-info">
                                <div class="event-title">Chuyá»‡n nghá» Sales thá»i bao cáº¥p</div>
                                <div class="event-description">Nhá»¯ng cÃ¢u chuyá»‡n thÃº vá»‹ vá» nghá» bÃ¡n hÃ ng thá»i ká»³ tem phiáº¿u, vá»›i nhá»¯ng bÃ i há»c kinh nghiá»‡m quÃ½ bÃ¡u...</div>
                                
                                <div class="event-meta">
                                    <div class="event-host">
                                        <div class="host-avatar">
                                            <i class="fas fa-user"></i>
                                        </div>
                                        <div class="host-info">
                                            <div class="host-name">BÃ¡c Lan</div>
                                            <div class="host-age">68 tuá»•i</div>
                                        </div>
                                    </div>
                                    <div class="event-time">
                                        <div class="time-label">Báº®T Äáº¦U</div>
                                        <div class="time-value">19:00 HÃ”M NAY</div>
                                    </div>
                                </div>
                                
                                <button id="btn-book-1" class="btn-book" onclick="studentBook(this)">
                                    <i class="far fa-calendar-plus"></i> BOOK SLOT
                                </button>
                            </div>
                        </div>

                        <div class="event-card">
                            <div class="event-img-container">
                                <img src="https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=600&auto=format&fit=crop" class="event-img">
                                <div class="event-badge">
                                    <i class="fas fa-clock"></i> Sáº¯p diá»…n ra
                                </div>
                            </div>
                            <div class="event-info">
                                <div class="event-title">TÃ¬nh yÃªu thá»i chÆ°a cÃ³ Internet</div>
                                <div class="event-description">Nhá»¯ng lÃ¡ thÆ° tay, nhá»¯ng cuá»™c háº¹n hÃ² khÃ´ng Ä‘iá»‡n thoáº¡i, tÃ¬nh yÃªu thuáº§n khiáº¿t cá»§a tháº¿ há»‡ trÆ°á»›c...</div>
                                
                                <div class="event-meta">
                                    <div class="event-host">
                                        <div class="host-avatar" style="background:linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                            H
                                        </div>
                                        <div class="host-info">
                                            <div class="host-name">BÃ¡c HÃ¹ng</div>
                                            <div class="host-age">72 tuá»•i</div>
                                        </div>
                                    </div>
                                    <div class="event-time">
                                        <div class="time-label">Dá»° KIáº¾N</div>
                                        <div class="time-value">15/05 - 20:00</div>
                                    </div>
                                </div>
                                
                                <button class="btn-book" disabled>
                                    <i class="fas fa-clock"></i> Sáº®P Má»ž ÄÄ‚NG KÃ
                                </button>
                            </div>
                        </div>

                        <div class="event-card">
                            <div class="event-img-container">
                                <img src="https://images.unsplash.com/photo-1556761175-b413da4baf72?q=80&w=600&auto=format&fit=crop" class="event-img">
                                <div class="event-badge">
                                    <i class="fas fa-star"></i> Phá»• biáº¿n
                                </div>
                            </div>
                            <div class="event-info">
                                <div class="event-title">Khá»Ÿi nghiá»‡p vá»›i 2 bÃ n tay tráº¯ng</div>
                                <div class="event-description">CÃ¢u chuyá»‡n tá»« má»™t cÃ´ng nhÃ¢n trá»Ÿ thÃ nh chá»§ doanh nghiá»‡p nhá» trong thá»i ká»³ Ä‘á»•i má»›i...</div>
                                
                                <div class="event-meta">
                                    <div class="event-host">
                                        <div class="host-avatar" style="background:linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                                            T
                                        </div>
                                        <div class="host-info">
                                            <div class="host-name">BÃ¡c TÃ¹ng</div>
                                            <div class="host-age">65 tuá»•i</div>
                                        </div>
                                    </div>
                                    <div class="event-time">
                                        <div class="time-label">Dá»° KIáº¾N</div>
                                        <div class="time-value">22/05 - 19:30</div>
                                    </div>
                                </div>
                                
                                <button class="btn-book" onclick="studentBook(this)">
                                    <i class="far fa-calendar-plus"></i> BOOK SLOT
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- View 2: Live Session (COMPLETELY REDESIGNED WITH COLLAPSIBLE PANELS) -->
                <div id="view-live" class="live-session-view hidden">
                    <div class="live-header">
                        <div class="live-title">
                            <div class="live-topic">
                                <span class="live-badge">LIVE</span>
                                Chuyá»‡n nghá» Sales thá»i bao cáº¥p
                            </div>
                            <div class="live-host">
                                <i class="fas fa-user-circle"></i> Host: BÃ¡c Lan (68t)
                            </div>
                        </div>
                        <div class="live-stats">
                            <div class="live-viewers">
                                <i class="fas fa-eye"></i> 52
                            </div>
                            <div class="live-duration" id="live-duration">00:12:45</div>
                        </div>
                    </div>

                    <div class="live-container">
                        <!-- Video Section -->
                        <div class="live-video-container">
                            <div class="video-placeholder" id="video-placeholder">
                                <div class="placeholder-icon">
                                    <i class="fas fa-video"></i>
                                </div>
                                <div class="placeholder-text">Äang káº¿t ná»‘i vá»›i bÃ¡c Lan...</div>
                                <div class="placeholder-subtext">Video sáº½ hiá»ƒn thá»‹ á»Ÿ Ä‘Ã¢y khi buá»•i live báº¯t Ä‘áº§u</div>
                            </div>
                            <video id="student-vid" class="live-video" autoplay muted loop playsinline style="display:none;"></video>
                            
                            <div class="video-overlay">
                                <div class="reactions-bar">
                                    <button class="reaction-btn heart" onclick="sendReaction('heart')">
                                        <i class="fas fa-heart"></i>
                                    </button>
                                    <button class="reaction-btn flower" onclick="sendReaction('flower')">
                                        <i class="fas fa-spa"></i>
                                    </button>
                                    <button class="reaction-btn clap" onclick="sendReaction('clap')">
                                        <i class="fas fa-hands-clapping"></i>
                                    </button>
                                    <button class="smart-note-btn" onclick="triggerSmartNote()" title="LÆ°u Ã½ hay (Clip + Text)">
                                        <i class="fas fa-bolt"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="reaction-count" id="reaction-count">
                                125 â¤ï¸ â€¢ 89 ðŸ‘ â€¢ 56 ðŸŒ¸
                            </div>
                        </div>

                        <!-- Live Control Panel -->
                        <div class="live-control-panel">
                            <button class="control-btn" id="toggle-notes" onclick="togglePanel('notes')" title="Smart Notes">
                                <i class="fas fa-bolt"></i>
                            </button>
                            <button class="control-btn" id="toggle-chat" onclick="togglePanel('chat')" title="Live Chat">
                                <i class="fas fa-comments"></i>
                            </button>
                            <button class="control-btn" onclick="endLiveSession()" title="Rá»i phÃ²ng">
                                <i class="fas fa-sign-out-alt"></i>
                            </button>
                        </div>

                        <!-- Collapsible Panels -->
                        <div class="live-panels-container">
                            <!-- Smart Notes Panel -->
                            <div class="live-panel" id="notes-panel">
                                <div class="panel-header" onclick="togglePanelContent('notes')">
                                    <div class="panel-title">
                                        <i class="fas fa-bolt" style="color: #FFD700;"></i>
                                        Smart Notes
                                        <span class="panel-badge" id="notes-badge">5</span>
                                    </div>
                                    <button class="panel-toggle">
                                        <i class="fas fa-chevron-down" id="notes-toggle-icon"></i>
                                    </button>
                                </div>
                                <div class="panel-content" id="notes-content">
                                    <div class="notes-panel">
                                        <div class="notes-container">
                                            <div id="notes-list" class="notes-list">
                                                <!-- Notes will be inserted here dynamically -->
                                            </div>
                                            
                                            <div id="empty-notes" class="empty-state" style="display: none;">
                                                <div class="empty-icon">
                                                    <i class="fas fa-lightbulb"></i>
                                                </div>
                                                <div class="empty-text">
                                                    ChÆ°a cÃ³ Smart Notes nÃ o.<br>
                                                    Báº¥m nÃºt vÃ ng <i class="fas fa-bolt"></i> Ä‘á»ƒ lÆ°u nhá»¯ng khoáº£nh kháº¯c Ä‘Ã¡ng nhá»› cÃ¹ng transcript.
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Live Chat Panel -->
                            <div class="live-panel" id="chat-panel">
                                <div class="panel-header" onclick="togglePanelContent('chat')">
                                    <div class="panel-title">
                                        <i class="fas fa-comments"></i>
                                        Live Chat
                                        <span class="panel-badge" id="chat-badge">24</span>
                                    </div>
                                    <button class="panel-toggle">
                                        <i class="fas fa-chevron-down" id="chat-toggle-icon"></i>
                                    </button>
                                </div>
                                <div class="panel-content" id="chat-content">
                                    <div class="chat-panel">
                                        <div class="chat-container">
                                            <div id="chat-messages" class="chat-messages">
                                                <!-- Chat messages will be inserted here dynamically -->
                                            </div>
                                        </div>
                                        
                                        <div class="chat-input-area">
                                            <input type="text" class="chat-input" id="chat-input" placeholder="Nháº­p cÃ¢u há»i hoáº·c bÃ¬nh luáº­n..." maxlength="200">
                                            <button class="send-btn" onclick="sendMessage()">
                                                <i class="fas fa-paper-plane"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- View 3: Profile & Notebook -->
                <div id="view-profile" class="profile-view hidden">
                    <div class="profile-header">
                        <div class="profile-avatar">
                            <span>S</span>
                        </div>
                        <div class="profile-name">Sinh ViÃªn EPICS</div>
                        <div class="profile-rank">ThÃ nh viÃªn Báº¡c</div>
                        
                        <div class="profile-stats">
                            <div class="stat-box">
                                <div class="stat-number" id="total-notes">0</div>
                                <div class="stat-label">Smart Notes</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-number">12</div>
                                <div class="stat-label">Giá» há»c</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-number">5</div>
                                <div class="stat-label">Buá»•i tham gia</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-number">4.9</div>
                                <div class="stat-label">ÄÃ¡nh giÃ¡</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="profile-section">
                        <div class="section-title">
                            <i class="fas fa-book-open"></i> Sá»• tay cá»§a tÃ´i
                        </div>
                        
                        <div id="notebook-list" class="notebook-list">
                            <!-- Notebook entries will be added here dynamically -->
                        </div>
                    </div>
                    
                    <button class="logout-btn" onclick="location.reload()">
                        <i class="fas fa-sign-out-alt"></i> ÄÄƒng xuáº¥t
                    </button>
                </div>
            </div>

            <!-- Footer Navigation -->
            <div class="genz-footer">
                <div class="nav-item active" onclick="switchTab('home', this)">
                    <i class="fas fa-compass"></i>
                    <span>KhÃ¡m phÃ¡</span>
                </div>
                <div class="nav-item nav-live" onclick="switchTab('live', this)" id="nav-live" style="display: none;">
                    <div class="nav-live-badge"></div>
                    <i class="fas fa-circle" style="color: #E74C3C;"></i>
                    <span>Live</span>
                </div>
                <div class="nav-item" onclick="switchTab('profile', this)">
                    <i class="fas fa-user"></i>
                    <span>TÃ i khoáº£n</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==========================================
        // GLOBAL STATE & UTILITIES
        // ==========================================
        let appState = {
            currentScreen: 'landing',
            elder: {
                step: 1,
                sessionActive: false,
                viewerCount: 52,
                timer: null
            },
            student: {
                bookedSessions: [],
                savedNotes: [],
                chatMessages: [],
                reactionCounts: {
                    heart: 125,
                    flower: 56,
                    clap: 89
                },
                liveTimer: null,
                chatInterval: null,
                noteIdCounter: 0,
                notebookEntries: [],
                chatAutoScroll: true,
                panelStates: {
                    notes: { open: false, expanded: true },
                    chat: { open: false, expanded: true }
                }
            }
        };

        // Sample notes data
        const sampleNotes = [
            {
                id: 1,
                time: "08:18:01 PM",
                content: "'Thá»i Ä‘Ã³ lÃ m sales pháº£i Ä‘i bá»™ 20-30km má»—i ngÃ y, nhÆ°ng khÃ´ng ai than vÄƒn cáº£.'",
                tags: ["ChÄƒm chá»‰", "KiÃªn trÃ¬", "Ná»— lá»±c"],
                pinned: true,
                timestamp: Date.now() - 300000
            },
            {
                id: 2,
                time: "08:17:45 PM",
                content: "'Há»“i bao cáº¥p, tem phiáº¿u lÃ  thá»© quÃ½ giÃ¡ nháº¥t. Äi bÃ¡n hÃ ng mÃ  thiáº¿u tem phiáº¿u coi nhÆ° khÃ´ng bÃ¡n Ä‘Æ°á»£c gÃ¬.'",
                tags: ["Kinh nghiá»‡m", "Lá»‹ch sá»­"],
                pinned: false,
                timestamp: Date.now() - 360000
            },
            {
                id: 3,
                time: "08:15:30 PM",
                content: "'KhÃ¡ch hÃ ng thá»i Ä‘Ã³ trung thÃ nh láº¯m. Mua quen má»™t chá»— lÃ  Ä‘i cáº£ Ä‘á»i, khÃ´ng Ä‘á»•i.'",
                tags: ["KhÃ¡ch hÃ ng", "Trung thÃ nh"],
                pinned: false,
                timestamp: Date.now() - 450000
            }
        ];

        // Sample chat messages
        const sampleChat = [
            {
                type: "system",
                content: "Buá»•i chia sáº» Ä‘Ã£ báº¯t Ä‘áº§u. HÃ£y Ä‘áº·t cÃ¢u há»i cho bÃ¡c Lan!",
                time: "08:17"
            },
            {
                type: "user",
                user: "Minh Anh",
                content: "ChÃ o bÃ¡c Lan áº¡! Em ráº¥t hÃ¡o há»©c Ä‘Æ°á»£c nghe bÃ¡c chia sáº» â¤ï¸",
                time: "08:17"
            },
            {
                type: "user",
                user: "Tuáº¥n Anh",
                content: "BÃ¡c Æ¡i, thá»i Ä‘Ã³ lÃ m sales cÃ³ váº¥t váº£ khÃ´ng áº¡?",
                time: "08:17"
            },
            {
                type: "user",
                user: "Äá»©c Anh",
                content: "Em há»c Ä‘Æ°á»£c nhiá»u quÃ¡!",
                time: "08:17"
            },
            {
                type: "user",
                user: "Minh Anh",
                content: "BÃ¡c cÃ³ thá»ƒ chia sáº» thÃªm vá» cÃ¡ch xÃ¢y dá»±ng má»‘i quan há»‡ vá»›i khÃ¡ch hÃ ng khÃ´ng áº¡?",
                time: "08:18"
            }
        ];

        // Sample notebook entries
        const sampleNotebook = [
            {
                id: 1,
                title: "BÃ i há»c vá» sá»± kiÃªn trÃ¬",
                date: "10/04/2023",
                preview: "BÃ¡c Lan chia sáº»: 'Thá»i bao cáº¥p, Ä‘á»ƒ bÃ¡n Ä‘Æ°á»£c mÃ³n hÃ ng pháº£i Ä‘i bá»™ 20km, gÃµ cá»­a tá»«ng nhÃ ...'",
                tags: ["KiÃªn trÃ¬", "Sales", "Kinh nghiá»‡m"]
            },
            {
                id: 2,
                title: "GiÃ¡ trá»‹ cá»§a sá»± chÃ¢n thÃ nh",
                date: "25/03/2023",
                preview: "BÃ¡c HÃ¹ng nÃ³i: 'KhÃ¡ch hÃ ng thá»i Ä‘Ã³ quÃ½ sá»± chÃ¢n thÃ nh hÆ¡n quáº£ng cÃ¡o hoa má»¹'",
                tags: ["Äáº¡o Ä‘á»©c kinh doanh", "ChÃ¢n thÃ nh"]
            }
        ];

        // Show toast notification
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            let icon = 'fas fa-info-circle';
            if (type === 'success') icon = 'fas fa-check-circle';
            if (type === 'warning') icon = 'fas fa-exclamation-triangle';
            
            toast.innerHTML = `
                <i class="${icon} toast-icon"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(toast);
            
            // Remove toast after animation
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.parentNode.removeChild(toast);
                }
            }, 2500);
        }

        // Start camera with constraints
        async function startCamera(videoElementId, constraints = { video: { facingMode: "user" } }) {
            try {
                const video = document.getElementById(videoElementId);
                const stream = await navigator.mediaDevices.getUserMedia(constraints);
                video.srcObject = stream;
                video.style.display = 'block';
                document.getElementById('video-placeholder').style.display = 'none';
                return stream;
            } catch (error) {
                console.error('Camera error:', error);
                showToast('KhÃ´ng thá»ƒ truy cáº­p camera. Äang sá»­ dá»¥ng cháº¿ Ä‘á»™ mÃ´ phá»ng.', 'warning');
                return null;
            }
        }

        // Format time
        function formatTime(seconds) {
            const hrs = Math.floor(seconds / 3600);
            const mins = Math.floor((seconds % 3600) / 60);
            const secs = seconds % 60;
            
            if (hrs > 0) {
                return `${hrs.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        // ==========================================
        // ELDER FLOW FUNCTIONS
        // ==========================================
        function startElderFlow() {
            document.getElementById('screen-landing').classList.add('hidden');
            document.getElementById('screen-elder').classList.remove('hidden');
            appState.currentScreen = 'elder';
            
            // Auto login simulation
            simulateElderLogin();
        }

        function simulateElderLogin() {
            // Show loading
            const container = document.getElementById('screen-elder');
            container.innerHTML = `
                <div class="loading-spinner">
                    <div class="spinner"></div>
                </div>
            `;
            
            // Simulate auto-login process
            setTimeout(() => {
                renderElderStep(1);
                
                // Simulate voice greeting after a short delay
                setTimeout(() => {
                    showVoiceFeedback("ChÃ¡u chÃ o bÃ¡c Lan! HÃ´m nay bÃ¡c khá»e khÃ´ng áº¡? Chá»‰ cÃ²n 10 phÃºt ná»¯a lÃ  gáº·p cÃ¡c báº¡n sinh viÃªn rá»“i.");
                }, 800);
            }, 1000);
        }

        function showVoiceFeedback(text) {
            const container = document.getElementById('screen-elder');
            const feedback = document.createElement('div');
            feedback.className = 'voice-feedback';
            feedback.innerHTML = `
                <div class="voice-icon">
                    <i class="fas fa-volume-up"></i>
                </div>
                <div class="voice-text">${text}</div>
            `;
            
            container.appendChild(feedback);
            
            // Remove after 5 seconds
            setTimeout(() => {
                if (feedback.parentNode) {
                    feedback.parentNode.removeChild(feedback);
                }
            }, 5000);
        }

        function renderElderStep(step) {
            appState.elder.step = step;
            const container = document.getElementById('screen-elder');
            
            if (step === 1) {
                // Welcome screen
                container.innerHTML = `
                    <div class="elder-welcome">
                        <div class="elder-avatar">
                            <i class="fas fa-user" style="font-size: 48px; color: white; margin-top: 20px;"></i>
                        </div>
                        <div class="elder-greeting">ChÃ o bÃ¡c Lan!</div>
                        <div class="elder-subtitle">HÃ´m nay bÃ¡c sáºµn sÃ ng chia sáº» vá»›i cÃ¡c báº¡n tráº» chá»© áº¡?</div>
                        
                        <div class="time-indicator">
                            <i class="fas fa-clock"></i>
                            <span>Báº¯t Ä‘áº§u sau: <strong>10 phÃºt</strong></span>
                        </div>
                        
                        <button class="btn-elder-primary" onclick="renderElderStep(2)">
                            <i class="fas fa-door-open"></i> VÃ€O Lá»šP NGAY
                        </button>
                    </div>
                `;
            } 
            else if (step === 2) {
                // Mirror (pre-check) screen
                container.innerHTML = `
                    <div class="mirror-screen">
                        <div class="mirror-title">Soi gÆ°Æ¡ng</div>
                        <div class="mirror-subtitle">Há»‡ thá»‘ng Ä‘ang tá»± chá»‰nh sÃ¡ng vÃ  lÃ m Ä‘áº¹p hÃ¬nh áº£nh</div>
                        
                        <div id="elder-cam-container">
                            <video id="elder-cam" autoplay muted playsinline></video>
                            <div class="beauty-filter">
                                <i class="fas fa-sparkles"></i> LÃ m Ä‘áº¹p
                            </div>
                        </div>
                        
                        <div class="mirror-controls">
                            <div class="mirror-feedback good" id="mirror-feedback">
                                <i class="fas fa-check-circle"></i> HÃ¬nh áº£nh tá»‘t! BÃ¡c lÃªn hÃ¬nh Ä‘áº¹p láº¯m áº¡.
                            </div>
                            <button class="btn-elder-primary" onclick="renderElderStep(3)">
                                <i class="fas fa-microphone"></i> Báº®T Äáº¦U NÃ“I
                            </button>
                        </div>
                    </div>
                `;
                
                // Start camera with beauty filter simulation
                startCamera('elder-cam', { 
                    video: { 
                        facingMode: "user",
                        width: { ideal: 1280 },
                        height: { ideal: 720 }
                    } 
                });
                
                // Simulate AI checking
                setTimeout(() => {
                    const feedback = document.getElementById('mirror-feedback');
                    // Randomly show different feedback (simulating different lighting conditions)
                    const feedbacks = [
                        { text: "HÃ¬nh áº£nh tá»‘t! BÃ¡c lÃªn hÃ¬nh Ä‘áº¹p láº¯m áº¡.", class: "good" },
                        { text: "HÆ¡i tá»‘i bÃ¡c Æ¡i, bÃ¡c báº­t thÃªm Ä‘Ã¨n hoáº·c quay ra cá»­a sá»• nhÃ©.", class: "warning" },
                        { text: "Ãnh sÃ¡ng hoÃ n háº£o! BÃ¡c sáºµn sÃ ng chÆ°a áº¡?", class: "good" }
                    ];
                    
                    const randomFeedback = feedbacks[Math.floor(Math.random() * feedbacks.length)];
                    feedback.className = `mirror-feedback ${randomFeedback.class}`;
                    feedback.innerHTML = `<i class="fas fa-${randomFeedback.class === 'good' ? 'check-circle' : 'exclamation-triangle'}"></i> ${randomFeedback.text}`;
                    
                    // Show voice feedback
                    showVoiceFeedback(randomFeedback.text);
                }, 2000);
            } 
            else if (step === 3) {
                // Live session screen
                container.innerHTML = `
                    <div class="elder-live-screen">
                        <div class="elder-live-header">
                            <div class="live-badge">
                                <i class="fas fa-circle"></i> LIVE
                            </div>
                            <div class="viewer-count">
                                <i class="fas fa-users"></i> <span id="viewer-count">${appState.elder.viewerCount}</span>
                            </div>
                        </div>
                        
                        <video id="elder-live-cam" class="elder-live-video" autoplay muted playsinline></video>
                        
                        <div class="elder-live-controls">
                            <button class="btn-elder-end" onclick="elderConfirmEnd()">
                                <i class="fas fa-moon"></i> NGHá»ˆ NGÆ I
                            </button>
                        </div>
                    </div>
                `;
                
                // Start camera for live session
                startCamera('elder-live-cam');
                
                // Start session timer
                appState.elder.sessionActive = true;
                startElderSessionTimer();
                
                // Simulate viewer count updates
                setInterval(() => {
                    if (appState.elder.sessionActive) {
                        // Randomly increase or decrease viewer count slightly
                        const change = Math.random() > 0.5 ? 1 : -1;
                        appState.elder.viewerCount = Math.max(40, appState.elder.viewerCount + change);
                        document.getElementById('viewer-count').textContent = appState.elder.viewerCount;
                    }
                }, 10000);
                
                // Simulate AI voice questions (student questions)
                setTimeout(() => {
                    showVoiceFeedback("Báº¡n Nam há»i: BÃ¡c Æ¡i, há»“i Ä‘Ã³ bÃ¡c Ä‘i lÃ m cÃ³ Ã¡p lá»±c khÃ´ng áº¡?");
                }, 8000);
                
                setTimeout(() => {
                    showVoiceFeedback("Báº¡n Mai há»i: Thá»i Ä‘Ã³ lÃ m sales cÃ³ cáº§n báº±ng Ä‘áº¡i há»c khÃ´ng bÃ¡c?");
                }, 20000);
            }
        }

        function startElderSessionTimer() {
            let seconds = 0;
            appState.elder.timer = setInterval(() => {
                seconds++;
                // Simulate occasional AI questions
                if (seconds % 30 === 0 && appState.elder.sessionActive) {
                    const questions = [
                        "Báº¡n HÃ¹ng há»i: BÃ¡c tháº¥y cÃ´ng viá»‡c bÃ¢y giá» khÃ¡c xÆ°a tháº¿ nÃ o?",
                        "Báº¡n Lan há»i: BÃ¡c cÃ³ lá»i khuyÃªn gÃ¬ cho sinh viÃªn má»›i ra trÆ°á»ng khÃ´ng?",
                        "Báº¡n Minh há»i: Thá»i Ä‘Ã³ cÃ³ Ä‘Æ°á»£c Ä‘Ã o táº¡o ká»¹ nÄƒng bÃ¡n hÃ ng khÃ´ng bÃ¡c?"
                    ];
                    const randomQuestion = questions[Math.floor(Math.random() * questions.length)];
                    showVoiceFeedback(randomQuestion);
                }
            }, 1000);
        }

        function elderConfirmEnd() {
            // Create confirmation overlay
            const overlay = document.createElement('div');
            overlay.className = 'session-end-overlay';
            
            overlay.innerHTML = `
                <div class="end-title">XÃ¡c nháº­n nghá»‰?</div>
                <div class="end-stats">
                    <div class="end-stat-item">
                        <div class="stat-label">NgÆ°á»i xem</div>
                        <div class="stat-value">${appState.elder.viewerCount}</div>
                    </div>
                    <div class="end-stat-item">
                        <div class="stat-label">Thá»i gian</div>
                        <div class="stat-value">12:45</div>
                    </div>
                    <div class="end-stat-item">
                        <div class="stat-label">TÆ°Æ¡ng tÃ¡c</div>
                        <div class="stat-value">98%</div>
                    </div>
                </div>
                <div class="end-message">
                    Tuyá»‡t quÃ¡! BÃ¡c Ä‘Ã£ truyá»n cáº£m há»©ng cho ${appState.elder.viewerCount} báº¡n tráº» hÃ´m nay.
                </div>
                
                <div style="display: flex; gap: 20px;">
                    <button class="btn-elder-primary" onclick="continueSession()" style="width: 120px; font-size: 16px; padding: 15px;">
                        TIáº¾P Tá»¤C
                    </button>
                    <button class="btn-elder-end" onclick="endElderSession()" style="width: 120px; font-size: 16px; padding: 15px;">
                        NGHá»ˆ NGÆ I
                    </button>
                </div>
                
                <div class="auto-close-timer" id="auto-close-timer">
                    Tá»± Ä‘á»™ng táº¯t sau <span id="countdown">10</span>s
                </div>
            `;
            
            document.getElementById('screen-elder').appendChild(overlay);
            
            // Start countdown
            let countdown = 10;
            const countdownElement = document.getElementById('countdown');
            const countdownInterval = setInterval(() => {
                countdown--;
                countdownElement.textContent = countdown;
                
                if (countdown <= 0) {
                    clearInterval(countdownInterval);
                    endElderSession();
                }
            }, 1000);
            
            // Store interval ID to clear if user cancels
            overlay.dataset.countdownInterval = countdownInterval;
        }

        function continueSession() {
            const overlay = document.querySelector('.session-end-overlay');
            if (overlay) {
                clearInterval(overlay.dataset.countdownInterval);
                overlay.remove();
            }
        }

        function endElderSession() {
            appState.elder.sessionActive = false;
            clearInterval(appState.elder.timer);
            
            // Stop camera streams
            const videoElements = document.querySelectorAll('video');
            videoElements.forEach(video => {
                if (video.srcObject) {
                    video.srcObject.getTracks().forEach(track => track.stop());
                }
            });
            
            // Show final summary
            const container = document.getElementById('screen-elder');
            container.innerHTML = `
                <div class="session-end-overlay">
                    <div class="end-title">Cáº£m Æ¡n bÃ¡c!</div>
                    <div class="end-stats">
                        <div class="end-stat-item">
                            <div class="stat-label">NgÆ°á»i xem</div>
                            <div class="stat-value">${appState.elder.viewerCount}</div>
                        </div>
                        <div class="end-stat-item">
                            <div class="stat-label">Thá»i gian</div>
                            <div class="stat-value">12:45</div>
                        </div>
                        <div class="end-stat-item">
                            <div class="stat-label">LÆ°á»£t yÃªu thÃ­ch</div>
                            <div class="stat-value">312</div>
                        </div>
                    </div>
                    <div class="end-message">
                        BÃ¡c Ä‘Ã£ truyá»n cáº£m há»©ng cho ${appState.elder.viewerCount} báº¡n tráº» hÃ´m nay.<br>
                        CÃ¡c sinh viÃªn Ä‘Ã£ lÆ°u láº¡i ${appState.student.savedNotes.length} Ã½ hay tá»« bÃ¡c.
                    </div>
                    <div class="auto-close-timer">
                        á»¨ng dá»¥ng sáº½ tá»± Ä‘á»™ng táº¯t sau <span id="final-countdown">5</span>s
                    </div>
                </div>
            `;
            
            // Final countdown to reload
            let finalCountdown = 5;
            const finalCountdownElement = document.getElementById('final-countdown');
            const finalInterval = setInterval(() => {
                finalCountdown--;
                finalCountdownElement.textContent = finalCountdown;
                
                if (finalCountdown <= 0) {
                    clearInterval(finalInterval);
                    location.reload();
                }
            }, 1000);
        }

        // ==========================================
        // STUDENT (GEN Z) FLOW FUNCTIONS
        // ==========================================
        function startStudentFlow() {
            document.getElementById('screen-landing').classList.add('hidden');
            document.getElementById('screen-student').classList.remove('hidden');
            appState.currentScreen = 'student';
            
            // Initialize data
            appState.student.savedNotes = [...sampleNotes];
            appState.student.chatMessages = [...sampleChat];
            appState.student.notebookEntries = [...sampleNotebook];
            appState.student.noteIdCounter = sampleNotes.length;
            
            // Render initial data
            renderNotes();
            renderChat();
            renderNotebook();
            
            showToast('ChÃ o má»«ng sinh viÃªn EPICS!', 'success');
            
            // Setup event listeners
            setupStudentEventListeners();
        }

        function setupStudentEventListeners() {
            // Chat input enter key
            const chatInput = document.getElementById('chat-input');
            if (chatInput) {
                chatInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        sendMessage();
                    }
                });
            }
            
            // Notification badge click
            const notificationBadge = document.getElementById('notification-badge');
            if (notificationBadge) {
                notificationBadge.addEventListener('click', function() {
                    showToast('Báº¡n cÃ³ 1 thÃ´ng bÃ¡o má»›i: Buá»•i live báº¯t Ä‘áº§u sau 15 phÃºt!', 'info');
                    this.classList.remove('active');
                });
            }
        }

        // Navigation
        function switchTab(tab, element = null) {
            // Update navigation UI
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            if (element) {
                element.classList.add('active');
            } else {
                // If no element provided, find and activate the corresponding nav item
                const navItems = document.querySelectorAll('.nav-item');
                const tabIndex = { 'home': 0, 'live': 1, 'profile': 2 }[tab];
                if (navItems[tabIndex]) {
                    navItems[tabIndex].classList.add('active');
                }
            }
            
            // Hide all views
            document.getElementById('view-home').classList.add('hidden');
            document.getElementById('view-live').classList.add('hidden');
            document.getElementById('view-profile').classList.add('hidden');
            
            // Show selected view
            if (tab === 'home') {
                document.getElementById('view-home').classList.remove('hidden');
            } else if (tab === 'live') {
                document.getElementById('view-live').classList.remove('hidden');
                startLiveSession();
            } else if (tab === 'profile') {
                document.getElementById('view-profile').classList.remove('hidden');
            }
        }

        // Toggle panel visibility
        function togglePanel(panelType) {
            const panel = document.getElementById(`${panelType}-panel`);
            const button = document.getElementById(`toggle-${panelType}`);
            const isOpen = appState.student.panelStates[panelType].open;
            
            // Toggle panel state
            appState.student.panelStates[panelType].open = !isOpen;
            
            if (!isOpen) {
                // Open the panel
                panel.classList.add('active');
                button.classList.add('active');
                
                // If the other panel is open, close it
                const otherPanelType = panelType === 'notes' ? 'chat' : 'notes';
                if (appState.student.panelStates[otherPanelType].open) {
                    togglePanel(otherPanelType);
                }
            } else {
                // Close the panel
                panel.classList.remove('active');
                button.classList.remove('active');
            }
        }

        // Toggle panel content (expand/collapse)
        function togglePanelContent(panelType) {
            const content = document.getElementById(`${panelType}-content`);
            const toggleIcon = document.getElementById(`${panelType}-toggle-icon`);
            const isExpanded = appState.student.panelStates[panelType].expanded;
            
            // Toggle content state
            appState.student.panelStates[panelType].expanded = !isExpanded;
            
            if (isExpanded) {
                // Collapse the content
                content.classList.add('collapsed');
                toggleIcon.classList.remove('fa-chevron-down');
                toggleIcon.classList.add('fa-chevron-up');
            } else {
                // Expand the content
                content.classList.remove('collapsed');
                toggleIcon.classList.remove('fa-chevron-up');
                toggleIcon.classList.add('fa-chevron-down');
            }
        }

        // Book a session
        function studentBook(button) {
            if (button.classList.contains('booked')) return;
            
            button.classList.add('booked');
            button.innerHTML = '<i class="fas fa-check"></i> ÄÃƒ BOOKING';
            
            // Add to booked sessions
            const eventTitle = button.closest('.event-info').querySelector('.event-title').textContent;
            appState.student.bookedSessions.push({
                title: eventTitle,
                time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}),
                date: new Date().toLocaleDateString()
            });
            
            showToast('ÄÃ£ thÃªm vÃ o Lá»‹ch & Nháº¯c nhá»Ÿ 15 phÃºt trÆ°á»›c!', 'success');
            
            // Show notification badge
            document.getElementById('notification-badge').classList.add('active');
            
            // Show live nav item
            document.getElementById('nav-live').style.display = 'flex';
            
            // Auto-switch to live view after booking (for demo)
            if (eventTitle.includes("Sales thá»i bao cáº¥p")) {
                setTimeout(() => {
                    switchTab('live');
                }, 1500);
            }
        }

        function startLiveSession() {
            // Start camera for student (simulated)
            startCamera('student-vid');
            
            // Start live session timer if not already running
            if (!appState.student.liveTimer) {
                startLiveTimer();
            }
            
            // Start fake chat if not already running
            if (!appState.student.chatInterval) {
                startFakeChat();
            }
            
            // Update reaction counts
            updateReactionCounts();
            
            // Initialize UI
            renderNotes();
            renderChat();
            
            showToast('ÄÃ£ káº¿t ná»‘i vá»›i buá»•i live cá»§a bÃ¡c Lan!', 'success');
        }

        function startLiveTimer() {
            let seconds = 765; // 12:45
            appState.student.liveTimer = setInterval(() => {
                seconds++;
                document.getElementById('live-duration').textContent = formatTime(seconds);
            }, 1000);
        }

        function startFakeChat() {
            // Clear any existing interval
            if (appState.student.chatInterval) {
                clearInterval(appState.student.chatInterval);
            }
            
            // Start new chat interval
            appState.student.chatInterval = setInterval(() => {
                const users = ["Minh Anh", "Tuáº¥n Anh", "KhÃ¡nh Linh", "Äá»©c Anh", "Há»“ng Nhung", "Mai PhÆ°Æ¡ng"];
                const messages = [
                    "Hay quÃ¡ bÃ¡c Æ¡i!",
                    "Tháº£ tim <3",
                    "BÃ¡c ká»ƒ tiáº¿p Ä‘i áº¡",
                    "Cáº£m Æ¡n bÃ¡c Ä‘Ã£ chia sáº» áº¡",
                    "Em há»c Ä‘Æ°á»£c nhiá»u quÃ¡",
                    "BÃ¡c cÃ³ lá»i khuyÃªn gÃ¬ cho gen Z khÃ´ng áº¡?"
                ];
                
                const randomUser = users[Math.floor(Math.random() * users.length)];
                const randomMessage = messages[Math.floor(Math.random() * messages.length)];
                
                addChatMessage(randomUser, randomMessage);
                
                // Update chat badge
                const chatBadge = document.getElementById('chat-badge');
                if (chatBadge) {
                    const currentCount = parseInt(chatBadge.textContent) || 0;
                    chatBadge.textContent = currentCount + 1;
                }
            }, 8000);
            
            // Simulate viewer count updates
            setInterval(() => {
                const viewerCount = document.querySelector('.live-viewers');
                if (viewerCount) {
                    const current = parseInt(viewerCount.textContent) || 52;
                    const change = Math.random() > 0.5 ? 1 : -1;
                    const newCount = Math.max(40, current + change);
                    viewerCount.innerHTML = `<i class="fas fa-eye"></i> ${newCount}`;
                }
            }, 15000);
        }

        function renderNotes() {
            const notesList = document.getElementById('notes-list');
            const emptyNotes = document.getElementById('empty-notes');
            
            if (!notesList) return;
            
            if (appState.student.savedNotes.length === 0) {
                notesList.innerHTML = '';
                if (emptyNotes) emptyNotes.style.display = 'block';
                return;
            }
            
            if (emptyNotes) emptyNotes.style.display = 'none';
            
            // Sort notes: pinned first, then by timestamp (newest first)
            const sortedNotes = [...appState.student.savedNotes].sort((a, b) => {
                if (a.pinned && !b.pinned) return -1;
                if (!a.pinned && b.pinned) return 1;
                return b.timestamp - a.timestamp;
            });
            
            notesList.innerHTML = sortedNotes.map(note => `
                <div class="note-card ${note.pinned ? 'pinned' : ''}" data-id="${note.id}">
                    <div class="note-header">
                        <div class="note-time">
                            <i class="fas fa-video"></i> ${note.time}
                        </div>
                    </div>
                    <div class="note-content">${note.content}</div>
                    <div class="note-tags">
                        ${note.tags.map(tag => `<span class="note-tag">${tag}</span>`).join('')}
                    </div>
                </div>
            `).join('');
            
            // Update note counts
            const noteCount = appState.student.savedNotes.length;
            const notesBadge = document.getElementById('notes-badge');
            const totalNotesElement = document.getElementById('total-notes');
            
            if (notesBadge) notesBadge.textContent = noteCount;
            if (totalNotesElement) totalNotesElement.textContent = noteCount;
        }

        function renderChat() {
            const chatMessages = document.getElementById('chat-messages');
            
            if (!chatMessages) return;
            
            chatMessages.innerHTML = appState.student.chatMessages.map(msg => {
                if (msg.type === 'system') {
                    return `
                        <div class="chat-message message-system">
                            <div class="system-bubble">${msg.content}</div>
                        </div>
                    `;
                } else {
                    const isOwn = msg.user === 'TÃ´i';
                    return `
                        <div class="chat-message message-user">
                            <div class="message-header">
                                <div class="user-avatar-small">${msg.user.charAt(0)}</div>
                                <div class="user-name">${msg.user}</div>
                                <div class="message-time">${msg.time}</div>
                            </div>
                            <div class="message-bubble ${isOwn ? 'own' : ''}">${msg.content}</div>
                        </div>
                    `;
                }
            }).join('');
            
            // Auto-scroll to bottom
            if (appState.student.chatAutoScroll) {
                setTimeout(() => {
                    const chatContainer = document.querySelector('.chat-container');
                    if (chatContainer) {
                        chatContainer.scrollTop = chatContainer.scrollHeight;
                    }
                }, 100);
            }
            
            // Update chat badge
            const userMessages = appState.student.chatMessages.filter(m => m.type === 'user').length;
            const chatBadge = document.getElementById('chat-badge');
            if (chatBadge) {
                chatBadge.textContent = userMessages;
            }
        }

        function renderNotebook() {
            const notebookList = document.getElementById('notebook-list');
            
            if (!notebookList) return;
            
            if (appState.student.notebookEntries.length === 0) {
                notebookList.innerHTML = `
                    <div class="empty-state" style="margin-top: 20px;">
                        <div class="empty-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        <div class="empty-text">
                            Sá»• tay cá»§a báº¡n cÃ²n trá»‘ng.<br>
                            CÃ¡c Smart Notes sáº½ tá»± Ä‘á»™ng Ä‘Æ°á»£c lÆ°u vÃ o Ä‘Ã¢y.
                        </div>
                    </div>
                `;
                return;
            }
            
            notebookList.innerHTML = appState.student.notebookEntries.map(entry => `
                <div class="notebook-card" onclick="openNotebookEntry(${entry.id})">
                    <div class="notebook-header">
                        <div class="notebook-title">${entry.title}</div>
                        <div class="notebook-date">${entry.date}</div>
                    </div>
                    <div class="notebook-preview">${entry.preview}</div>
                    <div class="notebook-tags">
                        ${entry.tags.map(tag => `<span class="notebook-tag">${tag}</span>`).join('')}
                    </div>
                </div>
            `).join('');
        }

        function addChatMessage(user, message, isSystem = false) {
            const newMessage = {
                type: isSystem ? "system" : "user",
                user: user,
                content: message,
                time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
            };
            
            appState.student.chatMessages.push(newMessage);
            renderChat();
            
            // Update chat badge
            const chatBadge = document.getElementById('chat-badge');
            if (chatBadge && !isSystem) {
                const currentCount = parseInt(chatBadge.textContent) || 0;
                chatBadge.textContent = currentCount + 1;
            }
        }

        function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (message) {
                // Add user's message
                addChatMessage("TÃ´i", message);
                
                // Clear input
                input.value = '';
                
                // Show toast notification
                showToast('AI: ÄÃ£ gá»­i cÃ¢u há»i tá»›i tai nghe bÃ¡c Lan!', 'info');
                
                // Simulate AI response after delay
                setTimeout(() => {
                    const responses = [
                        "BÃ¡c Lan: 'CÃ¢u há»i hay quÃ¡! Äá»ƒ bÃ¡c ká»ƒ cho mÃ  nghe...'",
                        "BÃ¡c Lan Ä‘ang tráº£ lá»i cÃ¢u há»i cá»§a báº¡n...",
                        "BÃ¡c Lan cáº£m Æ¡n cÃ¢u há»i cá»§a báº¡n!"
                    ];
                    
                    addChatMessage("BÃ¡c Lan", responses[Math.floor(Math.random() * responses.length)]);
                }, 2000);
            }
        }

        function sendReaction(type) {
            // Update reaction count
            appState.student.reactionCounts[type]++;
            
            // Update UI
            updateReactionCounts();
            
            // Show feedback
            const reactionNames = { heart: 'tim', flower: 'hoa', clap: 'vá»— tay' };
            showToast(`ÄÃ£ gá»­i ${reactionNames[type]} Ä‘áº¿n bÃ¡c Lan!`, 'success');
            
            // Animate button
            const button = document.querySelector(`.reaction-btn.${type}`);
            if (button) {
                button.style.transform = 'scale(1.3)';
                setTimeout(() => {
                    button.style.transform = 'scale(1)';
                }, 300);
            }
        }

        function updateReactionCounts() {
            const counts = appState.student.reactionCounts;
            const reactionCountElement = document.getElementById('reaction-count');
            if (reactionCountElement) {
                reactionCountElement.innerHTML = `
                    ${counts.heart} â¤ï¸ â€¢ ${counts.clap} ðŸ‘ â€¢ ${counts.flower} ðŸŒ¸
                `;
            }
        }

        function triggerSmartNote() {
            // Generate note ID
            appState.student.noteIdCounter++;
            const noteId = appState.student.noteIdCounter;
            
            // Create note data
            const noteTime = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', second:'2-digit'});
            const noteContent = getRandomNoteContent();
            
            const noteData = {
                id: noteId,
                time: noteTime,
                content: noteContent.text,
                tags: noteContent.tags,
                pinned: false,
                timestamp: Date.now()
            };
            
            // Add to saved notes
            appState.student.savedNotes.unshift(noteData);
            
            // Update UI
            renderNotes();
            
            // Also add to notebook entries
            const notebookEntry = {
                id: appState.student.notebookEntries.length + 1,
                title: `Smart Note #${noteId}`,
                date: new Date().toLocaleDateString(),
                preview: noteContent.text.substring(0, 100) + '...',
                tags: noteContent.tags
            };
            
            appState.student.notebookEntries.unshift(notebookEntry);
            renderNotebook();
            
            // Show toast
            showToast('<i class="fas fa-bolt"></i> ÄÃ£ lÆ°u Clip 30s + Transcript!', 'success');
        }

        function getRandomNoteContent() {
            const contents = [
                {
                    text: "'Äiá»u quan trá»ng nháº¥t lÃ  sá»± chÃ¢n thÃ nh. NÃ³i tháº­t, lÃ m tháº­t, khÃ¡ch hÃ ng sáº½ tin.'",
                    tags: ["Äáº¡o Ä‘á»©c", "ChÃ¢n thÃ nh", "BÃ i há»c"]
                },
                {
                    text: "'Má»—i láº§n gáº·p khÃ³ khÄƒn, tÃ´i láº¡i nghÄ© Ä‘áº¿n nhá»¯ng ngÃ y Ä‘áº§u Ä‘i bÃ¡n hÃ ng. KhÃ³ khÄƒn áº¥y giÃºp tÃ´i trÆ°á»Ÿng thÃ nh.'",
                    tags: ["VÆ°á»£t khÃ³", "TrÆ°á»Ÿng thÃ nh"]
                },
                {
                    text: "'Sales khÃ´ng pháº£i lÃ  bÃ¡n hÃ ng, mÃ  lÃ  giáº£i quyáº¿t váº¥n Ä‘á» cho khÃ¡ch hÃ ng.'",
                    tags: ["TÆ° duy", "Giáº£i phÃ¡p"]
                },
                {
                    text: "'KhÃ´ng cÃ³ khÃ¡ch hÃ ng khÃ³ tÃ­nh, chá»‰ cÃ³ ngÆ°á»i bÃ¡n chÆ°a hiá»ƒu khÃ¡ch hÃ ng.'",
                    tags: ["KhÃ¡ch hÃ ng", "Tháº¥u hiá»ƒu"]
                }
            ];
            
            return contents[Math.floor(Math.random() * contents.length)];
        }

        function openNotebookEntry(id) {
            const entry = appState.student.notebookEntries.find(e => e.id === id);
            if (entry) {
                alert(`Má»Ÿ notebook: ${entry.title}\n\n${entry.preview}`);
            }
        }

        function endLiveSession() {
            // Clear intervals
            if (appState.student.liveTimer) {
                clearInterval(appState.student.liveTimer);
                appState.student.liveTimer = null;
            }
            
            if (appState.student.chatInterval) {
                clearInterval(appState.student.chatInterval);
                appState.student.chatInterval = null;
            }
            
            // Stop camera
            const video = document.getElementById('student-vid');
            if (video && video.srcObject) {
                video.srcObject.getTracks().forEach(track => track.stop());
            }
            
            // Show video placeholder again
            document.getElementById('video-placeholder').style.display = 'flex';
            video.style.display = 'none';
            
            // Close all panels
            appState.student.panelStates.notes.open = false;
            appState.student.panelStates.chat.open = false;
            document.getElementById('notes-panel').classList.remove('active');
            document.getElementById('chat-panel').classList.remove('active');
            document.getElementById('toggle-notes').classList.remove('active');
            document.getElementById('toggle-chat').classList.remove('active');
            
            // Hide live view and nav item
            document.getElementById('view-live').classList.add('hidden');
            document.getElementById('nav-live').style.display = 'none';
            
            // Switch back to home
            switchTab('home');
            
            // Show session summary
            showToast(`Buá»•i live káº¿t thÃºc! Báº¡n Ä‘Ã£ lÆ°u ${appState.student.savedNotes.length} Smart Notes.`, 'success');
        }
    </script>
</body>
</html>